package mira.lobby.Listeners;import org.bukkit.Bukkit;import org.bukkit.entity.Player;import org.bukkit.event.EventHandler;import org.bukkit.event.Listener;import org.bukkit.event.player.AsyncPlayerChatEvent;import org.bukkit.plugin.Plugin;import java.io.BufferedWriter;import java.io.File;import java.io.FileWriter;import java.io.IOException;import java.text.SimpleDateFormat;import java.util.Date;public class ChatManeger implements Listener {    Plugin plugin;    //この下がコンストラクタ    public ChatManeger(Plugin me) {        this.plugin = me;        Bukkit.getPluginManager().registerEvents(this, plugin);        chackFolder();    }    public static File plugin_dir = new File("plugins//Logs");    public static File log_dir = new File(plugin_dir, "ChatLog");    @EventHandler    public void onPlayerChat(AsyncPlayerChatEvent e) {        Player p = e.getPlayer();        String chat = e.getMessage();        Date date = new Date(System.currentTimeMillis());        SimpleDateFormat sdf = new SimpleDateFormat("dd.MM.yyyy - hh:mm:ss");        String deta_str = sdf.format(date);        File file = new File(log_dir, "ChatLog.yml");        if(!file.exists()){            try{                file.createNewFile();            } catch (IOException excetpion){                System.out.print("File Error");                return;            }        }        try {            String crlf = System.getProperty("line.separator");            BufferedWriter bf = new BufferedWriter(new FileWriter(file));            bf.write(deta_str + " | " + p.getName() + "| " + chat + crlf);            bf.close();            // totyuu        }catch (IOException ex){            ex.printStackTrace();        }    }    public void chackFolder(){        if(!plugin_dir.exists()){            plugin_dir.mkdir();        }        if(!log_dir.exists()){            log_dir.mkdir();        }    }}